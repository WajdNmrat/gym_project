<div class="card p-3">
  <h5 class="mb-3">المشتركـون</h5>

  <!-- شريط فلترة بالـ ID (متدرّبين فقط) -->
  <div class="form-row mb-3">
    <div class="col-md-3 mb-2 d-flex align-items-center">
      <label class="mb-0 me-2">فلترة حسب ID المتدرّب:</label>
    </div>
    <div class="col-md-3 mb-2">
      <input
        class="form-control"
        type="number"
        [(ngModel)]="idFilter"
        placeholder="مثال: 13"
        (keyup.enter)="applyIdFilter()">
    </div>
    <div class="col-md-3 mb-2">
      <button class="btn btn-secondary me-2" (click)="applyIdFilter()" [disabled]="loading">بحث</button>
      <button class="btn btn-light" (click)="clearIdFilter()" [disabled]="loading">إزالة الفلتر</button>
    </div>
    <div class="col-md-3 mb-2 text-muted d-flex align-items-center" *ngIf="idFilter">
      <small>يعرض فقط المستخدم بالدور <b>trainee</b> إن وُجد.</small>
    </div>
  </div>

  <!-- فورم إضافة/تعديل -->
  <form [formGroup]="form" (ngSubmit)="submit()" class="mb-3">
    <div class="form-row">
      <div class="col-md-4 mb-2">
        <input class="form-control"
               formControlName="username"
               placeholder="اسم المستخدم">
      </div>

      <div class="col-md-4 mb-2">
        <input class="form-control"
               type="password"
               [placeholder]="editing ? 'اتركها فارغة إن لم تُرِد تغييرها' : 'كلمة المرور'"
               formControlName="password">
        <small *ngIf="editing" class="text-muted">كلمة المرور اختيارية عند التعديل.</small>
      </div>

      <div class="col-md-2 mb-2 d-flex align-items-center">
        <label class="mb-0">
          <input type="checkbox" formControlName="is_active" class="mr-2">
          نشط
        </label>
      </div>

      <div class="col-md-2 mb-2">
        <button class="btn btn-primary btn-block" type="submit" [disabled]="loading || form.invalid">
          {{ editing ? 'تحديث' : 'إضافة' }}
        </button>
      </div>
    </div>
  </form>

  <!-- مؤشر تحميل بسيط -->
  <div *ngIf="loading" class="text-muted mb-2">...تحميل</div>

  <!-- الجدول -->
  <app-generic-table
    [cols]="cols"
    [rows]="data"
    [loading]="loading"
    (edit)="edit($event)"
    (remove)="remove($event)">
  </app-generic-table>
</div>
